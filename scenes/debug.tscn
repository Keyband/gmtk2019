[gd_scene load_steps=15 format=2]

[ext_resource path="res://scenes/camera/camera2D.gd" type="Script" id=1]
[ext_resource path="res://resources/tilemaps/main.tres" type="TileSet" id=2]
[ext_resource path="res://scenes/weaponSpawner/weaponSpawner.gd" type="Script" id=3]
[ext_resource path="res://scenes/enemySpawner/enemySpawner.gd" type="Script" id=4]
[ext_resource path="res://scenes/player/player.gd" type="Script" id=5]
[ext_resource path="res://resources/animActorDead.tres" type="Animation" id=6]
[ext_resource path="res://resources/animActorIdle.tres" type="Animation" id=7]
[ext_resource path="res://resources/animActorWalk.tres" type="Animation" id=8]
[ext_resource path="res://resources/Sprites/Weapons_Icons_16x16.png" type="Texture" id=9]
[ext_resource path="res://resources/Sprites/char_24x24.png" type="Texture" id=10]
[ext_resource path="res://icon.png" type="Texture" id=11]

[sub_resource type="Animation" id=2]
resource_name = "walk"
length = 0.8
loop = true
tracks/0/type = "value"
tracks/0/path = NodePath("sprite:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0, 0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7 ),
"transitions": PoolRealArray( 1, 1, 1, 1, 1, 1, 1, 1 ),
"update": 1,
"values": [ 2, 3, 4, 5, 6, 7, 8, 9 ]
}

[sub_resource type="GDScript" id=3]
script/source = "tool
extends Sprite

# Declare member variables here. Examples:
# var a = 2
# var b = \"text\"

# Called when the node enters the scene tree for the first time.
func _ready():
	set_physics_process(true)
	pass # Replace with function body.

func _physics_process(delta):
	if get_parent().currentWeapon==\"Nothing\":pass
	elif get_parent().currentWeapon==\"Lance\":$spriteWeapon2.frame=1+10
	elif get_parent().currentWeapon==\"Axe\":$spriteWeapon2.frame=2+10
	elif get_parent().currentWeapon==\"Sword\":$spriteWeapon2.frame=0+10
	elif get_parent().currentWeapon==\"Katana\":$spriteWeapon2.frame=3+10
	elif get_parent().currentWeapon==\"Dagger\":$spriteWeapon2.frame=4+10
	elif get_parent().currentWeapon==\"MorningStar\":$spriteWeapon2.frame=5+10
	$spriteWeapon2.frame
	self.visible=true if not get_parent().currentWeapon in [\"Nothing\",\"Attacking\"] else false
	self.rotation=(get_global_mouse_position()-self.global_position).angle()
"

[sub_resource type="RectangleShape2D" id=1]
extents = Vector2( 6.00006, 9 )

[node name="debug" type="Control"]
anchor_right = 1.0
anchor_bottom = 1.0

[node name="camera2D" type="Camera2D" parent="."]
anchor_mode = 0
current = true
script = ExtResource( 1 )

[node name="twnShake" type="Tween" parent="camera2D"]

[node name="Node2D" type="Node2D" parent="."]

[node name="tileMap" type="TileMap" parent="Node2D"]
tile_set = ExtResource( 2 )
collision_layer = 7
collision_mask = 7
format = 1
tile_data = PoolIntArray( -1, 0, 0, -65536, 0, 0, -65535, 0, 0, -65534, 0, 0, -65533, 0, 0, -65532, 0, 0, -65531, 0, 0, -65530, 0, 0, 65535, 0, 0, 5, 0, 0, 6, 0, 0, 131071, 0, 0, 65541, 0, 0, 65542, 0, 0, 196607, 0, 0, 131077, 0, 0, 131078, 0, 0, 262143, 0, 0, 196613, 0, 0, 196614, 0, 0, 327679, 0, 0, 262149, 0, 0, 262150, 0, 0, 393215, 0, 0, 327680, 0, 0, 327681, 0, 0, 327682, 0, 0, 327683, 0, 0, 327684, 0, 0, 327685, 0, 0, 327686, 0, 0, 458751, 0, 0, 393216, 0, 0, 393217, 0, 0, 393218, 0, 0, 393219, 0, 0, 393220, 0, 0, 393221, 0, 0, 393222, 0, 0 )

[node name="weaponSpawner" type="Node2D" parent="Node2D"]
editor/display_folded = true
script = ExtResource( 3 )

[node name="timer" type="Timer" parent="Node2D/weaponSpawner"]
autostart = true

[node name="enemySpawner" type="Position2D" parent="Node2D"]
position = Vector2( 97, 127 )
script = ExtResource( 4 )

[node name="timer" type="Timer" parent="Node2D/enemySpawner"]
autostart = true

[node name="player" type="KinematicBody2D" parent="Node2D"]
position = Vector2( 176, 174 )
script = ExtResource( 5 )

[node name="animationPlayer" type="AnimationPlayer" parent="Node2D/player"]
autoplay = "idle"
anims/dead = ExtResource( 6 )
anims/idle = ExtResource( 7 )
anims/walk = SubResource( 2 )
anims/walkWithWeapon = ExtResource( 8 )

[node name="spriteWeapon" type="Sprite" parent="Node2D/player"]
self_modulate = Color( 1, 1, 1, 0 )
position = Vector2( 0, 1 )
texture = ExtResource( 9 )
offset = Vector2( 12, -6 )
vframes = 3
hframes = 10
frame = 10
script = SubResource( 3 )

[node name="spriteWeapon2" type="Sprite" parent="Node2D/player/spriteWeapon"]
position = Vector2( 18, 0 )
rotation = 0.785398
scale = Vector2( 1.25, 1.25 )
texture = ExtResource( 9 )
vframes = 3
hframes = 10
frame = 10

[node name="sprite" type="Sprite" parent="Node2D/player"]
texture = ExtResource( 10 )
hframes = 22
frame = 4

[node name="sprite2" type="Sprite" parent="Node2D/player"]
modulate = Color( 0, 0, 0, 1 )
position = Vector2( 50, 0 )
rotation = 0.785398
scale = Vector2( 0.05, 0.05 )
texture = ExtResource( 11 )

[node name="collisionShape2D" type="CollisionShape2D" parent="Node2D/player"]
position = Vector2( 6.10352e-05, 0.999969 )
shape = SubResource( 1 )

[node name="area2D" type="Area2D" parent="Node2D/player"]
editor/display_folded = true

[node name="collisionShape2D" type="CollisionShape2D" parent="Node2D/player/area2D"]

[node name="label" type="Label" parent="Node2D/player"]
margin_left = -1.99994
margin_top = -26.0
margin_right = 48.0001
margin_bottom = -12.0
text = "Nothing"
[connection signal="tween_completed" from="camera2D/twnShake" to="camera2D" method="_on_twnShake_tween_completed"]
[connection signal="timeout" from="Node2D/weaponSpawner/timer" to="Node2D/weaponSpawner" method="_on_timer_timeout"]
[connection signal="timeout" from="Node2D/enemySpawner/timer" to="Node2D/enemySpawner" method="_on_timer_timeout"]
